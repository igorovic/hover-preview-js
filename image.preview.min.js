/* [https://github.com/sixem/image.preview.js] */
!function(t){t.fn.imagePreview=function(e){function i(e,i){return t.inArray(e,i)>-1}function s(e){return $offsets=e.offset(),{top:$offsets.top-t(window).scrollTop(),left:$offsets.left-t(window).scrollLeft(),offset:$offsets}}function r(){if(void 0==c.current)return!1;$ww=t(window).width(),$offset=s(c.lastTrigger),$ww/2>$ww-$offset.left?($pos=Math.floor($ww-$offset.left+10),c.current.css({left:"",right:$pos+"px","max-width":$ww-$pos-c.settings.margin+"px"})):($pos=Math.floor($offset.left+c.lastTrigger.width()+10),c.current.css({left:$pos+"px",right:"","max-width":$ww-$pos-c.settings.margin+"px"})),c.current.height()<c.currentHeight&&(c.currentHeight=c.current.height()),$x=$offset.top-c.currentHeight,$x>10&&c.current.css("margin-top",$x+"px"),c.current.css("visibility","visible"),c.visible=!0}function n(e){return 0==e?($previews=t("body").find("#video-preview, #image-preview"),$previews.length>0&&$previews.remove(),c.visible=!1,c.current=c.lastSrc=void 0,c.currentHeight=c.currentWidth=0,!1):($data=c.lastTrigger.data("preview"),!1!==$data&&void 0!==$data?c.lastSrc=c.lastTrigger.data("preview"):($attr=c.lastTrigger.attr("href"),"undefined"!=typeof $attr&&!1!==$attr&&(c.lastSrc=$attr)),void 0!=c.lastSrc&&(c.lastExt=c.lastSrc.split(".").pop().toLowerCase(),i(c.lastExt,c.settings.extensions.images)&&(img=new Image,img.orig=c.lastSrc,t(img).on("load",function(){if(!c.visible)return this.orig==c.lastSrc&&(t("body").prepend('<img id="image-preview" src="'+img.src+'">'),c.current=t("body").find("#image-preview"),c.current.on("load",function(){t(document).imagePreview.getDimensions()}),void 0!=c.settings.css?c.current.css(c.settings.styles).css(c.settings.css):c.current.css(c.settings.styles)),!0}),img.src=c.lastSrc),void(i(c.lastExt,c.settings.extensions.videos)&&(t("body").prepend('<video id="video-preview" controls loop muted autoplay><source src=""></video>'),$video=t("body").find("#video-preview").first(),c.current=$video,$video.attr("data-orig",c.lastSrc),$video.find("source").attr("src",c.lastSrc),void 0!=c.settings.css?$video.css(c.settings.styles).css(c.settings.css):$video.css(c.settings.styles),$video[0].load(),o($video)))))}function o(t){function e(){return void 0!=c.current&&t.data("orig")==c.lastSrc&&(t.prop("readyState")>3&&t.width()>0&&t.height()>0?(t.one("seeked").prop("currentTime",0),c.currentWidth=t.width(),c.currentHeight=t.height(),r(),!0):void setTimeout(e,100))}e()}var c=this;c.settings=t.extend({hoverDelay:150,margin:4,elements:[],extensions:{images:["jpg","jpeg","gif","png","ico","svg","bmp"],videos:["mp4","webm"]}},c.settings,e),c.settings.styles={"max-height":"calc(100% - "+2*c.settings.margin+"px)",visibility:"hidden",position:"fixed",top:c.settings.margin,left:0,"z-index":4},t.fn.imagePreview.getDimensions=function(){function t(){return void 0!=c.current&&(c.current.width()>0&&c.current.height()>0?(c.currentWidth=c.current.width(),c.currentHeight=c.current.height(),r(),!0):void setTimeout(t,100))}t()},function(){if(1>c.settings.elements.length)return!1;t.each(c.settings.elements,function(e,i){$target=t(document).find(i),$target.length>0&&(t(document).on("mouseenter",i,function(e){c.lastTrigger=t(this),c.timer=setTimeout(function(){if(c.visible)return!0;n()},c.settings.hoverDelay)}),t(document).on("mouseleave",i,function(t){clearTimeout(c.timer),n(!1)}))})}()}}(jQuery);